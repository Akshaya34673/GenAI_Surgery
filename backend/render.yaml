services:
  - type: web
    name: genai-surgery
    env: python
    plan: free
    buildCommand: pip install -r backend/requirements.txt
    startCommand: gunicorn backend.app:app --bind 0.0.0.0:$PORT --timeout 300
    disks:
      - name: data
        mountPath: /app
        sizeGB: 1
    preDeployCommand: |
      fallocate -l 1G /app/swapfile
      chmod 600 /app/swapfile
      mkswap /app/swapfile
      swapon /app/swapfile
      echo "Swap enabled: 1GB"